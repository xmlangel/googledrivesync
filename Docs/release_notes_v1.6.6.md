# Google Drive Sync v1.6.6 릴리즈 노트

이번 버전은 동기화 충돌 처리 신뢰성, 검증 리포트 가시성, 그리고 Obsidian 환경 설정 파일 처리 정책 개선에 집중했습니다.

## 주요 변경 사항

### 1. 충돌 해결 안정성 강화
- `Drive 사용`/`둘 다 유지` 선택 시 다운로드 결과를 엄격히 검증하도록 개선했습니다.
- 다운로드/이름변경 실패를 성공으로 처리하지 않고 오류 상태(`ERROR`)로 기록하도록 보강했습니다.

### 2. 검증 실패 시 즉시 보정 재시도
- `verify.md`에서 누락 항목이 발견되면 같은 동기화 턴에서 즉시 전체 스캔 재시도를 수행합니다.
- 재검증 후에도 누락이 남으면 다음 동기화에서 전체 스캔을 강제하도록 토큰 처리 로직을 개선했습니다.

### 3. 검증 리포트 개선
- `verify.md` 자체를 검증 비교 대상에서 제외하도록 정비했습니다.
- `.obsidian` 전용 상태 확인 섹션(`Obsidian Sync Check`)을 추가해 제외 설정/누락/불일치 상태를 한눈에 확인할 수 있습니다.
- `.obsidian/*` 단일 사이즈 불일치 케이스는 즉시 재다운로드를 시도하고, 재시도 후에도 불일치면 결과를 `WARN`으로 표기합니다.

### 4. .obsidian 동기화 정책 정비
- 기본 정책: `.obsidian`은 서버 우선(다운로드 우선, 업로드/삭제 반영 차단)으로 동작합니다.
- 사용자 제외 목록에 `.obsidian`을 넣으면 완전 제외(업/다운/삭제 모두 제외)되도록 우선순위를 정리했습니다.
- 동기화 제외 화면에 `.obsidian 제외` 체크박스를 추가하고, 기본 체크 상태로 초기화되도록 개선했습니다.

### 5. UI/운영 편의 개선
- 충돌 다이얼로그에서 파일명뿐 아니라 로컬 전체 경로를 함께 표시해 위치 확인이 쉬워졌습니다.
- 앱 버전을 `1.6.6`으로 상향(`versionCode 31`)했습니다.
